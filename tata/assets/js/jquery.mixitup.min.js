!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery","easing"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("easing")):b(a.jQuery)}(this,function(a){!function(a){function b(b,d,e,f,g){function h(){n.unbind(),d&&c(d,e,f,g),g.startOrder=[],g.newOrder=[],g.origSort=[],g.checkSort=[],m.removeStyle(g.prefix+"filter, filter, "+g.prefix+"transform, transform, opacity, display").css(g.clean).removeAttr("data-checksum"),window.atob||m.css({display:"none",opacity:"0"}),n.removeStyle(g.prefix+"transition, transition, "+g.prefix+"perspective, perspective, "+g.prefix+"perspective-origin, perspective-origin, "+(g.resizeContainer?"height":"")),"list"==g.layoutMode?(o.css({display:g.targetDisplayList,opacity:"1"}),g.origDisplay=g.targetDisplayList):(o.css({display:g.targetDisplayGrid,opacity:"1"}),g.origDisplay=g.targetDisplayGrid),g.origLayout=g.layoutMode,setTimeout(function(){if(m.removeStyle(g.prefix+"transition, transition"),g.mixing=!1,"function"==typeof g.onMixEnd){var a=g.onMixEnd.call(this,g);g=a?a:g}})}var i,j,k,l,m,n,o,p,q,r,s,t;for(clearInterval(g.failsafe),g.mixing=!0,"function"==typeof g.onMixStart&&(i=g.onMixStart.call(this,g),g=i?i:g),j=g.transitionSpeed,i=0;2>i;i++)k=0==i?k=g.prefix:"",g.transition[k+"transition"]="all "+j+"ms linear",g.transition[k+"transform"]=k+"translate3d(0,0,0)",g.perspective[k+"perspective"]=g.perspectiveDistance+"px",g.perspective[k+"perspective-origin"]=g.perspectiveOrigin;if(l=g.targetSelector,m=f.find(l),m.each(function(){this.data={}}),n=m.parent(),n.css(g.perspective),g.easingFallback="ease-in-out","smooth"==g.easing&&(g.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)"),"snap"==g.easing&&(g.easing="cubic-bezier(0.77, 0, 0.175, 1)"),"windback"==g.easing&&(g.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",g.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)"),"windup"==g.easing&&(g.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",g.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)"),i="list"==g.layoutMode&&null!=g.listEffects?g.listEffects:g.effects,Array.prototype.indexOf&&(g.fade=-1<i.indexOf("fade")?"0":"",g.scale=-1<i.indexOf("scale")?"scale(.01)":"",g.rotateZ=-1<i.indexOf("rotateZ")?"rotate(180deg)":"",g.rotateY=-1<i.indexOf("rotateY")?"rotateY(90deg)":"",g.rotateX=-1<i.indexOf("rotateX")?"rotateX(90deg)":"",g.blur=-1<i.indexOf("blur")?"blur(8px)":"",g.grayscale=-1<i.indexOf("grayscale")?"grayscale(100%)":""),b=b.replace(/\s|\//g,"."),o=a(),p=a(),"or"==g.filterLogic?(q=b.split("."),1==g.multiFilter&&""==q[0]&&q.shift(),1>q.length?p=p.add(f.find(l+":visible")):m.each(function(){for(var b=0,c=a(this),d=0;d<q.length;d++)c.hasClass(q[d])&&(o=o.add(c),b++);0==b&&(p=p.add(c))})):(o=o.add(n.find(l+"."+b)),p=p.add(n.find(l+":not(."+b+"):visible"))),b=o.length,r=a(),s=a(),t=a(),p.each(function(){var b=a(this);"none"!=b.css("display")&&(r=r.add(b),t=t.add(b))}),o.filter(":visible").length==b&&!r.length&&!d){if(g.origLayout==g.layoutMode)return h(),!1;if(1==o.length)return"list"==g.layoutMode?(f.addClass(g.listClass),f.removeClass(g.gridClass),t.css("display",g.targetDisplayList)):(f.addClass(g.gridClass),f.removeClass(g.listClass),t.css("display",g.targetDisplayGrid)),h(),!1}if(g.origHeight=n.height(),o.length){if(f.removeClass(g.failClass),o.each(function(){var b=a(this);"none"==b.css("display")?s=s.add(b):t=t.add(b)}),g.origLayout!=g.layoutMode&&0==g.animateGridList)return"list"==g.layoutMode?(f.addClass(g.listClass),f.removeClass(g.gridClass),t.css("display",g.targetDisplayList)):(f.addClass(g.gridClass),f.removeClass(g.listClass),t.css("display",g.targetDisplayGrid)),h(),!1;if(!window.atob)return h(),!1;if(m.css(g.clean),t.each(function(){this.data.origPos=a(this).offset()}),"list"==g.layoutMode?(f.addClass(g.listClass),f.removeClass(g.gridClass),s.css("display",g.targetDisplayList)):(f.addClass(g.gridClass),f.removeClass(g.listClass),s.css("display",g.targetDisplayGrid)),s.each(function(){this.data.showInterPos=a(this).offset()}),r.each(function(){this.data.hideInterPos=a(this).offset()}),t.each(function(){this.data.preInterPos=a(this).offset()}),"list"==g.layoutMode?t.css("display",g.targetDisplayList):t.css("display",g.targetDisplayGrid),d&&c(d,e,f,g),d&&g.origSort.compare(g.checkSort))return h(),!1;for(r.hide(),s.each(function(){this.data.finalPos=a(this).offset()}),t.each(function(){this.data.finalPrePos=a(this).offset()}),g.newHeight=n.height(),d&&c("reset",null,f,g),s.hide(),t.css("display",g.origDisplay),"block"==g.origDisplay?(f.addClass(g.listClass),s.css("display",g.targetDisplayList)):(f.removeClass(g.listClass),s.css("display",g.targetDisplayGrid)),g.resizeContainer&&n.css("height",g.origHeight+"px"),b={},i=0;2>i;i++)k=0==i?k=g.prefix:"",b[k+"transform"]=g.scale+" "+g.rotateX+" "+g.rotateY+" "+g.rotateZ,b[k+"filter"]=g.blur+" "+g.grayscale;s.css(b),t.each(function(){var d,e,f,b=this.data,c=a(this);for(c.hasClass("mix_tohide")?(b.preTX=b.origPos.left-b.hideInterPos.left,b.preTY=b.origPos.top-b.hideInterPos.top):(b.preTX=b.origPos.left-b.preInterPos.left,b.preTY=b.origPos.top-b.preInterPos.top),d={},e=0;2>e;e++)f=0==e?f=g.prefix:"",d[f+"transform"]="translate("+b.preTX+"px,"+b.preTY+"px)";c.css(d)}),"list"==g.layoutMode?(f.addClass(g.listClass),f.removeClass(g.gridClass)):(f.addClass(g.gridClass),f.removeClass(g.listClass)),setTimeout(function(){var b,c,d;if(g.resizeContainer){for(b={},c=0;2>c;c++)d=0==c?d=g.prefix:"",b[d+"transition"]="all "+j+"ms ease-in-out",b.height=g.newHeight+"px";n.css(b)}for(r.css("opacity",g.fade),s.css("opacity",1),s.each(function(){var c,d,e,b=this.data;for(b.tX=b.finalPos.left-b.showInterPos.left,b.tY=b.finalPos.top-b.showInterPos.top,c={},d=0;2>d;d++)e=0==d?e=g.prefix:"",c[e+"transition-property"]=e+"transform, "+e+"filter, opacity",c[e+"transition-timing-function"]=g.easing+", linear, linear",c[e+"transition-duration"]=j+"ms",c[e+"transition-delay"]="0",c[e+"transform"]="translate("+b.tX+"px,"+b.tY+"px)",c[e+"filter"]="none";a(this).css("-webkit-transition","all "+j+"ms "+g.easingFallback).css(c)}),t.each(function(){var c,d,e,b=this.data;for(b.tX=0!=b.finalPrePos.left?b.finalPrePos.left-b.preInterPos.left:0,b.tY=0!=b.finalPrePos.left?b.finalPrePos.top-b.preInterPos.top:0,c={},d=0;2>d;d++)e=0==d?e=g.prefix:"",c[e+"transition"]="all "+j+"ms "+g.easing,c[e+"transform"]="translate("+b.tX+"px,"+b.tY+"px)";a(this).css("-webkit-transition","all "+j+"ms "+g.easingFallback).css(c)}),b={},c=0;2>c;c++)d=0==c?d=g.prefix:"",b[d+"transition"]="all "+j+"ms "+g.easing+", "+d+"filter "+j+"ms linear, opacity "+j+"ms linear",b[d+"transform"]=g.scale+" "+g.rotateX+" "+g.rotateY+" "+g.rotateZ,b[d+"filter"]=g.blur+" "+g.grayscale,b.opacity=g.fade;r.css(b),n.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(b){(-1<b.originalEvent.propertyName.indexOf("transform")||-1<b.originalEvent.propertyName.indexOf("opacity"))&&(-1<l.indexOf(".")?a(b.target).hasClass(l.replace(".",""))&&h():a(b.target).is(l)&&h())})},10),g.failsafe=setTimeout(function(){g.mixing&&h()},j+400)}else{if(g.resizeContainer&&n.css("height",g.origHeight+"px"),!window.atob)return h(),!1;r=p,setTimeout(function(){var a,b,c;if(n.css(g.perspective),g.resizeContainer){for(a={},b=0;2>b;b++)c=0==b?c=g.prefix:"",a[c+"transition"]="height "+j+"ms ease-in-out",a.height=g.minHeight+"px";n.css(a)}if(m.css(g.transition),p.length){for(a={},b=0;2>b;b++)c=0==b?c=g.prefix:"",a[c+"transform"]=g.scale+" "+g.rotateX+" "+g.rotateY+" "+g.rotateZ,a[c+"filter"]=g.blur+" "+g.grayscale,a.opacity=g.fade;r.css(a),n.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(a){(-1<a.originalEvent.propertyName.indexOf("transform")||-1<a.originalEvent.propertyName.indexOf("opacity"))&&(f.addClass(g.failClass),h())})}else g.mixing=!1},10)}}function c(b,c,d,e){function f(a,c){return 1*a.attr(b).toLowerCase()<1*c.attr(b).toLowerCase()?-1:1*a.attr(b).toLowerCase()>1*c.attr(b).toLowerCase()?1:0}function g(a){"asc"==c?h.prepend(a).prepend(" 	"):h.append(a).append(" 	")}var h,i,j,k,l,m;if(d.find(e.targetSelector).wrapAll('<div class="mix_sorter"/>'),h=d.find(".mix_sorter"),e.origSort.length||h.find(e.targetSelector+":visible").each(function(){a(this).wrap("<s/>"),e.origSort.push(a(this).parent().html().replace(/\s+/g,"")),a(this).unwrap()}),h.empty(),"reset"==b)a.each(e.startOrder,function(){h.append(this).append(" 	")});else if("default"==b)a.each(e.origOrder,function(){g(this)});else if("random"==b){if(!e.newOrder.length){for(i=e.startOrder.slice(),j=i.length,k=j;k--;)l=parseInt(Math.random()*j),m=i[k],i[k]=i[l],i[l]=m;e.newOrder=i}a.each(e.newOrder,function(){h.append(this).append(" 	")})}else"custom"==b?a.each(c,function(){g(this)}):("undefined"==typeof e.origOrder[0].attr(b)&&console.log("No such attribute found. Terminating"),e.newOrder.length||(a.each(e.origOrder,function(){e.newOrder.push(a(this))}),e.newOrder.sort(f)),a.each(e.newOrder,function(){g(this)}));e.checkSort=[],h.find(e.targetSelector+":visible").each(function(b){var c=a(this);0==b&&c.attr("data-checksum","1"),c.wrap("<s/>"),e.checkSort.push(c.parent().html().replace(/\s+/g,"")),c.unwrap()}),d.find(e.targetSelector).unwrap()}var d={init:function(c){return this.each(function(){var f,e,g,h,i,d={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};c&&a.extend(d,c),this.config=d,a.support.touch="ontouchend"in document,a.support.touch&&(d.isTouch=!0,d.resetDelay=350),d.container=a(this),e=d.container;a:{for(f=e[0],g=["Webkit","Moz","O","ms"],h=0;h<g.length;h++)if(g[h]+"Transition"in f.style){f=g[h];break a}f="transition"in f.style?"":!1}for(d.prefix=f,d.prefix=d.prefix?"-"+d.prefix.toLowerCase()+"-":"",e.find(d.targetSelector).each(function(){d.origOrder.push(a(this))}),f=0;2>f;f++)g=0==f?g=d.prefix:"",d.transition[g+"transition"]="all "+d.transitionSpeed+"ms ease-in-out",d.perspective[g+"perspective"]=d.perspectiveDistance+"px",d.perspective[g+"perspective-origin"]=d.perspectiveOrigin;for(f=0;2>f;f++)g=0==f?g=d.prefix:"",d.clean[g+"transition"]="none";"list"==d.layoutMode?(e.addClass(d.listClass),d.origDisplay=d.targetDisplayList):(e.addClass(d.gridClass),d.origDisplay=d.targetDisplayGrid),d.origLayout=d.layoutMode,f=d.showOnLoad.split(" "),a.each(f,function(){a(d.filterSelector+'[data-filter="'+this+'"]').addClass("active")}),e.find(d.targetSelector).addClass("mix_all"),"all"==f[0]&&(f[0]="mix_all",d.showOnLoad="mix_all"),i=a(),a.each(f,function(){i=i.add(a("."+this))}),i.each(function(){var b=a(this);"list"==d.layoutMode?b.css("display",d.targetDisplayList):b.css("display",d.targetDisplayGrid),b.css(d.transition)}),setTimeout(function(){d.mixing=!0,i.css("opacity","1"),setTimeout(function(){if("list"==d.layoutMode?i.removeStyle(d.prefix+"transition, transition").css({display:d.targetDisplayList,opacity:1}):i.removeStyle(d.prefix+"transition, transition").css({display:d.targetDisplayGrid,opacity:1}),d.mixing=!1,"function"==typeof d.onMixLoad){var a=d.onMixLoad.call(this,d);d=a?a:d}},d.transitionSpeed)},10),d.filter=d.showOnLoad,a(d.sortSelector).bind(d.buttonEvent,function(){if(!d.mixing){var c=a(this),f=c.attr("data-sort"),g=c.attr("data-order");if(c.hasClass("active")){if("random"!=f)return!1}else a(d.sortSelector).removeClass("active"),c.addClass("active");e.find(d.targetSelector).each(function(){d.startOrder.push(a(this))}),b(d.filter,f,g,e,d)}}),a(d.filterSelector).bind(d.buttonEvent,function(){var c,f;d.mixing||(c=a(this),0==d.multiFilter?(a(d.filterSelector).removeClass("active"),c.addClass("active"),d.filter=c.attr("data-filter"),a(d.filterSelector+'[data-filter="'+d.filter+'"]').addClass("active"),"all"==d.filter&&(d.filter="mix_all")):(f=c.attr("data-filter"),"all"==f&&(f="mix_all"),c.hasClass("active")?(c.removeClass("active"),d.filter=d.filter.replace(RegExp("(\\s|^)"+f),"")):(c.addClass("active"),d.filter=d.filter+" "+f)),b(d.filter,null,null,e,d))})})},toGrid:function(){return this.each(function(){var c=this.config;"grid"!=c.layoutMode&&(c.layoutMode="grid",b(c.filter,null,null,a(this),c))})},toList:function(){return this.each(function(){var c=this.config;"list"!=c.layoutMode&&(c.layoutMode="list",b(c.filter,null,null,a(this),c))})},filter:function(c){return this.each(function(){var d=this.config;a(d.filterSelector).removeClass("active"),a(d.filterSelector+'[data-filter="'+c+'"]').addClass("active"),"all"==c&&(c="mix_all"),d.mixing||(d.filter=c,b(c,null,null,a(this),d))})},sort:function(c){return this.each(function(){var e,f,d=this.config;a.isArray(c)?(e=c[0],f=c[1]):(e=c,f="desc"),d.mixing||(a(this).find(d.targetSelector).each(function(){d.startOrder.push(a(this))}),b(d.filter,e,f,a(this),d))})}};a.fn.mixitup=function(a){return d[a]?d[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:d.init.apply(this,arguments)},a.fn.removeStyle=function(b){return this.each(function(){var d,c=a(this);b=b.replace(/\s+/g,""),d=b.split(","),a.each(d,function(){var a=RegExp(this.toString()+"[^;]+;?","g");c.attr("style",function(b,c){return c?c.replace(a,""):void 0})})})},Array.prototype.compare=function(a){if(this.length!=a.length)return!1;for(var b=0;b<a.length;b++)if(this[b].compare&&!this[b].compare(a[b])||this[b]!==a[b])return!1;return!0}}(a)});
